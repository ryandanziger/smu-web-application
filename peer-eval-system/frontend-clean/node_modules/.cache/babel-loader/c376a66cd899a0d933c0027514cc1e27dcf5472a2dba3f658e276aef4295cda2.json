{"ast":null,"code":"// ... existing imports and state logic ...\n\nconst handleSubmit = async e => {\n  e.preventDefault();\n\n  // 1. Validate the form\n  if (!validateForm()) return;\n\n  // 2. Prepare the complete evaluation object, including the submission time\n  const evaluation = {\n    teammateId: currentTeammate.id,\n    teammateName: currentTeammate.name,\n    // Include all rating and feedback fields\n    ...formData,\n    // Capture current time in ISO format for easy PostgreSQL TIMESTAMP insertion\n    submittedAt: new Date().toISOString()\n  };\n\n  // 3. Submit data to the back-end API\n  try {\n    const response = await fetch('http://localhost:3001/api/submit-evaluation', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(evaluation)\n    });\n    if (!response.ok) {\n      // Read error details from the server response\n      const errorData = await response.json();\n      throw new Error(errorData.message || `HTTP Error! Status: ${response.status}`);\n    }\n\n    // Data successfully submitted (optional: you could log the response data here)\n    console.log(\"Evaluation successfully sent to API:\", evaluation);\n\n    // 4. Proceed to the next step or success screen\n    setEvaluations([...evaluations, evaluation]);\n    if (currentTeammateIndex < mockTeammates.length - 1) {\n      setCurrentTeammateIndex(currentTeammateIndex + 1);\n      resetForm();\n    } else {\n      setShowSuccess(true);\n    }\n  } catch (error) {\n    console.error('Submission Error:', error);\n    // Alert the user about the submission failure\n    alert('Failed to submit evaluation. Check the console for details. (Is your backend server running?) Error: ' + error.message);\n  }\n};\n\n// ... rest of the component","map":{"version":3,"names":["handleSubmit","e","preventDefault","validateForm","evaluation","teammateId","currentTeammate","id","teammateName","name","formData","submittedAt","Date","toISOString","response","fetch","method","headers","body","JSON","stringify","ok","errorData","json","Error","message","status","console","log","setEvaluations","evaluations","currentTeammateIndex","mockTeammates","length","setCurrentTeammateIndex","resetForm","setShowSuccess","error","alert"],"sources":["/Users/ryandanziger/Desktop/smu-web-application/peer-eval-system/frontend-clean/src/components/EvaluationForm.js"],"sourcesContent":["// ... existing imports and state logic ...\n\nconst handleSubmit = async (e) => {\n    e.preventDefault();\n    \n    // 1. Validate the form\n    if (!validateForm()) return;\n\n    // 2. Prepare the complete evaluation object, including the submission time\n    const evaluation = {\n        teammateId: currentTeammate.id,\n        teammateName: currentTeammate.name,\n        // Include all rating and feedback fields\n        ...formData,\n        // Capture current time in ISO format for easy PostgreSQL TIMESTAMP insertion\n        submittedAt: new Date().toISOString() \n    };\n    \n    // 3. Submit data to the back-end API\n    try {\n        const response = await fetch('http://localhost:3001/api/submit-evaluation', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify(evaluation),\n        });\n\n        if (!response.ok) {\n            // Read error details from the server response\n            const errorData = await response.json();\n            throw new Error(errorData.message || `HTTP Error! Status: ${response.status}`);\n        }\n\n        // Data successfully submitted (optional: you could log the response data here)\n        console.log(\"Evaluation successfully sent to API:\", evaluation);\n\n        // 4. Proceed to the next step or success screen\n        setEvaluations([...evaluations, evaluation]);\n\n        if (currentTeammateIndex < mockTeammates.length - 1) {\n            setCurrentTeammateIndex(currentTeammateIndex + 1);\n            resetForm();\n        } else {\n            setShowSuccess(true);\n        }\n\n    } catch (error) {\n        console.error('Submission Error:', error);\n        // Alert the user about the submission failure\n        alert('Failed to submit evaluation. Check the console for details. (Is your backend server running?) Error: ' + error.message);\n    }\n};\n\n// ... rest of the component"],"mappings":"AAAA;;AAEA,MAAMA,YAAY,GAAG,MAAOC,CAAC,IAAK;EAC9BA,CAAC,CAACC,cAAc,CAAC,CAAC;;EAElB;EACA,IAAI,CAACC,YAAY,CAAC,CAAC,EAAE;;EAErB;EACA,MAAMC,UAAU,GAAG;IACfC,UAAU,EAAEC,eAAe,CAACC,EAAE;IAC9BC,YAAY,EAAEF,eAAe,CAACG,IAAI;IAClC;IACA,GAAGC,QAAQ;IACX;IACAC,WAAW,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC;EACxC,CAAC;;EAED;EACA,IAAI;IACA,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,6CAA6C,EAAE;MACxEC,MAAM,EAAE,MAAM;MACdC,OAAO,EAAE;QACL,cAAc,EAAE;MACpB,CAAC;MACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAChB,UAAU;IACnC,CAAC,CAAC;IAEF,IAAI,CAACU,QAAQ,CAACO,EAAE,EAAE;MACd;MACA,MAAMC,SAAS,GAAG,MAAMR,QAAQ,CAACS,IAAI,CAAC,CAAC;MACvC,MAAM,IAAIC,KAAK,CAACF,SAAS,CAACG,OAAO,IAAI,uBAAuBX,QAAQ,CAACY,MAAM,EAAE,CAAC;IAClF;;IAEA;IACAC,OAAO,CAACC,GAAG,CAAC,sCAAsC,EAAExB,UAAU,CAAC;;IAE/D;IACAyB,cAAc,CAAC,CAAC,GAAGC,WAAW,EAAE1B,UAAU,CAAC,CAAC;IAE5C,IAAI2B,oBAAoB,GAAGC,aAAa,CAACC,MAAM,GAAG,CAAC,EAAE;MACjDC,uBAAuB,CAACH,oBAAoB,GAAG,CAAC,CAAC;MACjDI,SAAS,CAAC,CAAC;IACf,CAAC,MAAM;MACHC,cAAc,CAAC,IAAI,CAAC;IACxB;EAEJ,CAAC,CAAC,OAAOC,KAAK,EAAE;IACZV,OAAO,CAACU,KAAK,CAAC,mBAAmB,EAAEA,KAAK,CAAC;IACzC;IACAC,KAAK,CAAC,uGAAuG,GAAGD,KAAK,CAACZ,OAAO,CAAC;EAClI;AACJ,CAAC;;AAED","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}