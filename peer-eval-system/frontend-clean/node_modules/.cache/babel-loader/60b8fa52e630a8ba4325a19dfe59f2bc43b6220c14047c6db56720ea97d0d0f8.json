{"ast":null,"code":"var _jsxFileName = \"/Users/ryandanziger/Desktop/smu-web-application/peer-eval-system/frontend-clean/src/components/EvaluationAssignment.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport API_URL from '../config';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst COLORS = {\n  TAN_BACKGROUND: 'rgba(138,112,76,0.9)',\n  WHITE: 'white',\n  NAVY_BUTTON: '#141b4d',\n  PLACEHOLDER_TEXT: '#8a704c',\n  TEXT_PRIMARY: '#2d3748',\n  TEXT_SECONDARY: '#5C7094',\n  ERROR_RED: '#C97C7C',\n  SUCCESS_GREEN: '#4CAF50',\n  BODY_BACKGROUND: 'white',\n  HEADER_TEXT: '#2d3748',\n  HEADER_BAR_BG: '#e8e8e8',\n  TAN_BASE: '#C4B5A0',\n  TAN_SELECTED: '#8B7355',\n  NAVY_BASE: '#5C7094',\n  NAVY_SELECTED: '#4A5568',\n  BROWN_TAN: '#8a704c'\n};\nexport default function EvaluationAssignment() {\n  _s();\n  const {\n    courseId\n  } = useParams();\n  const navigate = useNavigate();\n  const {\n    user\n  } = useAuth();\n  const [course, setCourse] = useState(null);\n  const [groups, setGroups] = useState([]);\n  const [students, setStudents] = useState([]);\n  const [assignments, setAssignments] = useState([]);\n\n  // Form state matching Figma design\n  const [description, setDescription] = useState('');\n  const [points, setPoints] = useState('25');\n  const [assignToType, setAssignToType] = useState('groups'); // 'everyone' or 'groups'\n  const [selectedGroups, setSelectedGroups] = useState([]);\n  const [selectedStudents, setSelectedStudents] = useState([]);\n  const [dueDate, setDueDate] = useState('');\n  const [dueTime, setDueTime] = useState('');\n  const [availableFromDate, setAvailableFromDate] = useState('');\n  const [availableFromTime, setAvailableFromTime] = useState('');\n  const [untilDate, setUntilDate] = useState('');\n  const [untilTime, setUntilTime] = useState('');\n  const [searchQuery, setSearchQuery] = useState('');\n  const [showGroupDropdown, setShowGroupDropdown] = useState(false);\n  const [showStudentDropdown, setShowStudentDropdown] = useState(false);\n  const [pendingAssignments, setPendingAssignments] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n  const fetchCourseInfo = useCallback(async () => {\n    try {\n      const response = await fetch(`${API_URL}/api/courses/${courseId}`);\n      const data = await response.json();\n      if (response.ok) {\n        setCourse(data.course);\n      }\n    } catch (err) {\n      console.error('Error fetching course:', err);\n    }\n  }, [courseId]);\n  const fetchGroups = useCallback(async () => {\n    try {\n      const response = await fetch(`${API_URL}/api/courses/${courseId}/groups`);\n      const data = await response.json();\n      if (response.ok) {\n        setGroups(data.groups || []);\n      }\n    } catch (err) {\n      console.error('Error fetching groups:', err);\n    }\n  }, [courseId]);\n  const fetchStudents = useCallback(async () => {\n    try {\n      const response = await fetch(`${API_URL}/api/courses/${courseId}/roster`);\n      const data = await response.json();\n      if (response.ok) {\n        setStudents(data.roster || []);\n      }\n    } catch (err) {\n      console.error('Error fetching students:', err);\n    }\n  }, [courseId]);\n  const fetchAssignments = useCallback(async () => {\n    try {\n      const response = await fetch(`${API_URL}/api/courses/${courseId}/evaluation-assignments`);\n      const data = await response.json();\n      if (response.ok) {\n        setAssignments(data.assignments || []);\n      }\n    } catch (err) {\n      console.error('Error fetching assignments:', err);\n    }\n  }, [courseId]);\n  useEffect(() => {\n    const loadData = async () => {\n      setIsLoading(true);\n      await Promise.all([fetchCourseInfo(), fetchGroups(), fetchStudents(), fetchAssignments()]);\n      setIsLoading(false);\n    };\n    loadData();\n  }, [courseId, fetchCourseInfo, fetchGroups, fetchStudents, fetchAssignments]);\n\n  // Handle \"Everyone\" selection\n  const handleEveryoneToggle = () => {\n    if (assignToType === 'everyone') {\n      setAssignToType('groups');\n      setSelectedGroups([]);\n    } else {\n      setAssignToType('everyone');\n      setSelectedGroups([]);\n      setSelectedStudents([]);\n    }\n  };\n\n  // Handle group selection\n  const handleGroupToggle = group => {\n    setSelectedGroups(prev => {\n      const isSelected = prev.find(g => g.groupid === group.groupid);\n      const newGroups = isSelected ? prev.filter(g => g.groupid !== group.groupid) : [...prev, group];\n      console.log('Group toggled:', group.group_name, 'Selected groups:', newGroups.map(g => g.group_name));\n      return newGroups;\n    });\n    setShowGroupDropdown(false);\n  };\n\n  // Handle student selection\n  const handleStudentToggle = student => {\n    if (selectedStudents.find(s => s.studentid === student.studentid)) {\n      setSelectedStudents(prev => prev.filter(s => s.studentid !== student.studentid));\n    } else {\n      setSelectedStudents(prev => [...prev, student]);\n    }\n    setShowStudentDropdown(false);\n  };\n\n  // Remove selected group\n  const removeGroup = groupId => {\n    setSelectedGroups(prev => prev.filter(g => g.groupid !== groupId));\n  };\n\n  // Remove selected student\n  const removeStudent = studentId => {\n    setSelectedStudents(prev => prev.filter(s => s.studentid !== studentId));\n  };\n\n  // Filter groups/students based on search\n  const filteredGroups = groups.filter(g => g.group_name.toLowerCase().includes(searchQuery.toLowerCase()));\n  const filteredStudents = students.filter(s => s.studentname.toLowerCase().includes(searchQuery.toLowerCase()));\n\n  // Handle \"Assign To\" button - adds to pending assignments\n  const handleAddToPending = () => {\n    if (!dueDate) {\n      setError('Please select a due date');\n      return;\n    }\n    console.log('Add to pending - assignToType:', assignToType, 'selectedGroups:', selectedGroups.length);\n    if (assignToType === 'everyone') {\n      // Add assignment for all students in all groups\n      if (groups.length === 0) {\n        setError('No groups available. Please create groups first.');\n        return;\n      }\n      const newAssignments = groups.map(group => ({\n        groupId: group.groupid,\n        groupName: group.group_name,\n        evaluatorType: 'everyone',\n        description,\n        points: parseInt(points) || 0,\n        dueDate: dueDate ? `${dueDate}T${dueTime || '23:59'}` : null,\n        availableFrom: availableFromDate ? `${availableFromDate}T${availableFromTime || '00:00'}` : null,\n        until: untilDate ? `${untilDate}T${untilTime || '23:59'}` : null\n      }));\n      setPendingAssignments(prev => [...prev, ...newAssignments]);\n      setSuccess(`Added ${newAssignments.length} assignment(s) for all students`);\n    } else if (selectedGroups.length > 0) {\n      // Add assignments for selected groups\n      // If no students selected, use all students in the course\n      const evaluatorIds = selectedStudents.length > 0 ? selectedStudents.map(s => s.studentid) : null; // null means use all students\n\n      console.log('Creating assignments for groups:', {\n        selectedGroups: selectedGroups.map(g => g.group_name),\n        evaluatorIds,\n        selectedStudentsCount: selectedStudents.length,\n        allStudentsCount: students.length\n      });\n      const newAssignments = selectedGroups.map(group => ({\n        groupId: group.groupid,\n        groupName: group.group_name,\n        evaluatorType: 'group',\n        evaluatorIds: evaluatorIds,\n        description,\n        points: parseInt(points) || 0,\n        dueDate: dueDate ? `${dueDate}T${dueTime || '23:59'}` : null,\n        availableFrom: availableFromDate ? `${availableFromDate}T${availableFromTime || '00:00'}` : null,\n        until: untilDate ? `${untilDate}T${untilTime || '23:59'}` : null\n      }));\n      setPendingAssignments(prev => [...prev, ...newAssignments]);\n      setSuccess(`Added ${newAssignments.length} assignment(s)`);\n    } else {\n      setError('Please select at least one group or choose \"Everyone\"');\n      return;\n    }\n\n    // Clear form\n    setDescription('');\n    setPoints('25');\n    setAssignToType('groups');\n    setSelectedGroups([]);\n    setSelectedStudents([]);\n    setDueDate('');\n    setDueTime('');\n    setAvailableFromDate('');\n    setAvailableFromTime('');\n    setUntilDate('');\n    setUntilTime('');\n    setSearchQuery('');\n    setSuccess('Assignment added to pending list');\n  };\n\n  // Handle final \"Save and Assign\" - creates all pending assignments\n  const handleSaveAndAssign = async () => {\n    if (pendingAssignments.length === 0) {\n      setError('No assignments to save. Please add assignments first.');\n      return;\n    }\n    setIsSubmitting(true);\n    setError('');\n    setSuccess('');\n    try {\n      let totalCreated = 0;\n      const errors = [];\n      for (const assignment of pendingAssignments) {\n        try {\n          let evaluatorStudentIds = [];\n          if (assignment.evaluatorType === 'everyone') {\n            // All students in the course evaluate this group\n            evaluatorStudentIds = students.map(s => s.studentid);\n          } else {\n            // Use selected students, or all students if none selected\n            evaluatorStudentIds = assignment.evaluatorIds || students.map(s => s.studentid);\n            console.log(`Assignment for ${assignment.groupName}:`, {\n              evaluatorIds: assignment.evaluatorIds,\n              evaluatorStudentIds,\n              studentsCount: students.length\n            });\n          }\n          if (!evaluatorStudentIds || evaluatorStudentIds.length === 0) {\n            errors.push(`No evaluators for ${assignment.groupName}`);\n            continue;\n          }\n\n          // Combine date and time for due date\n          let dueDateTime = null;\n          if (assignment.dueDate) {\n            try {\n              const dateStr = assignment.dueDate.includes('T') ? assignment.dueDate : `${assignment.dueDate}T${assignment.dueDate.split('T')[1] || '23:59'}`;\n              const date = new Date(dateStr);\n              if (!isNaN(date.getTime())) {\n                dueDateTime = date.toISOString();\n              } else {\n                throw new Error(`Invalid due date: ${assignment.dueDate}`);\n              }\n            } catch (err) {\n              errors.push(`${assignment.groupName}: Invalid due date format`);\n              continue;\n            }\n          } else {\n            errors.push(`${assignment.groupName}: Due date is required`);\n            continue;\n          }\n\n          // Format availableFrom and until dates\n          let availableFromISO = null;\n          if (assignment.availableFrom) {\n            try {\n              const dateStr = assignment.availableFrom.includes('T') ? assignment.availableFrom : `${assignment.availableFrom}T${assignment.availableFrom.split('T')[1] || '00:00'}`;\n              const date = new Date(dateStr);\n              if (!isNaN(date.getTime())) {\n                availableFromISO = date.toISOString();\n              }\n            } catch (err) {\n              console.warn(`Invalid availableFrom date for ${assignment.groupName}:`, err);\n            }\n          }\n          let untilISO = null;\n          if (assignment.until) {\n            try {\n              const dateStr = assignment.until.includes('T') ? assignment.until : `${assignment.until}T${assignment.until.split('T')[1] || '23:59'}`;\n              const date = new Date(dateStr);\n              if (!isNaN(date.getTime())) {\n                untilISO = date.toISOString();\n              }\n            } catch (err) {\n              console.warn(`Invalid until date for ${assignment.groupName}:`, err);\n            }\n          }\n          const requestBody = {\n            courseId: parseInt(courseId),\n            groupId: assignment.groupId,\n            evaluatorStudentIds: evaluatorStudentIds,\n            dueDate: dueDateTime,\n            assignmentName: assignment.description || `Peer Evaluation - ${assignment.groupName}`,\n            points: assignment.points || 0,\n            availableFrom: availableFromISO,\n            until: untilISO\n          };\n          console.log(`Creating assignment for ${assignment.groupName}:`, requestBody);\n          const response = await fetch(`${API_URL}/api/evaluation-assignments`, {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(requestBody)\n          });\n\n          // Check if response is JSON\n          const contentType = response.headers.get('content-type');\n          let data;\n          if (contentType && contentType.includes('application/json')) {\n            data = await response.json();\n          } else {\n            // Server returned HTML (likely an error page)\n            const text = await response.text();\n            console.error(`Non-JSON response for ${assignment.groupName}:`, text.substring(0, 200));\n            errors.push(`${assignment.groupName}: Server error (${response.status}). Check backend logs.`);\n            continue;\n          }\n          if (response.ok) {\n            var _data$assignments;\n            totalCreated += ((_data$assignments = data.assignments) === null || _data$assignments === void 0 ? void 0 : _data$assignments.length) || 0;\n          } else {\n            errors.push(`${assignment.groupName}: ${data.message || 'Failed'}`);\n          }\n        } catch (err) {\n          console.error(`Error creating assignment for ${assignment.groupName}:`, err);\n          errors.push(`${assignment.groupName}: ${err.message}`);\n        }\n      }\n      if (totalCreated > 0) {\n        setSuccess(`Successfully created ${totalCreated} evaluation assignment(s)`);\n        setPendingAssignments([]);\n        fetchAssignments();\n      } else {\n        setError(`Failed to create assignments: ${errors.join('; ')}`);\n      }\n    } catch (err) {\n      console.error('Error saving assignments:', err);\n      setError('Failed to save assignments. Please try again.');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n  const handleDeleteAssignment = async assignmentId => {\n    if (!window.confirm('Are you sure you want to delete this assignment?')) {\n      return;\n    }\n    try {\n      const response = await fetch(`${API_URL}/api/evaluation-assignments/${assignmentId}`, {\n        method: 'DELETE'\n      });\n      if (response.ok) {\n        setSuccess('Assignment deleted successfully');\n        fetchAssignments();\n      } else {\n        const data = await response.json();\n        setError(data.message || 'Failed to delete assignment');\n      }\n    } catch (err) {\n      console.error('Error deleting assignment:', err);\n      setError('Failed to delete assignment. Please try again.');\n    }\n  };\n  const removePendingAssignment = index => {\n    setPendingAssignments(prev => prev.filter((_, i) => i !== index));\n  };\n  const formatDateTime = (dateString, timeString) => {\n    if (!dateString) return '';\n    try {\n      const date = new Date(`${dateString}T${timeString || '00:00'}`);\n      if (isNaN(date.getTime())) {\n        return dateString; // Return original if invalid\n      }\n      return date.toLocaleDateString('en-US', {\n        year: 'numeric',\n        month: 'short',\n        day: 'numeric',\n        hour: '2-digit',\n        minute: '2-digit'\n      });\n    } catch (e) {\n      return dateString;\n    }\n  };\n  const formatDate = dateString => {\n    if (!dateString) return 'N/A';\n    const date = new Date(dateString);\n    return date.toLocaleDateString('en-US', {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n  const getStatusColor = status => {\n    switch (status) {\n      case 'completed':\n        return COLORS.SUCCESS_GREEN;\n      case 'overdue':\n        return COLORS.ERROR_RED;\n      default:\n        return COLORS.TEXT_SECONDARY;\n    }\n  };\n\n  // Helper to format time for input (HH:MM)\n  const formatTimeForInput = timeString => {\n    if (!timeString) return '';\n    // Convert \"23:59 PM\" format to \"23:59\" if needed\n    return timeString;\n  };\n\n  // Helper to get current date/time in local format for inputs\n  const getLocalDateTime = dateString => {\n    if (!dateString) return '';\n    const date = new Date(dateString);\n    const year = date.getFullYear();\n    const month = String(date.getMonth() + 1).padStart(2, '0');\n    const day = String(date.getDate()).padStart(2, '0');\n    return `${year}-${month}-${day}`;\n  };\n  const containerStyle = {\n    fontFamily: 'Georgia, serif',\n    backgroundColor: COLORS.BODY_BACKGROUND,\n    minHeight: '100vh'\n  };\n  const headerBannerStyle = {\n    backgroundImage: `linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4)), url(\"https://www.kenan-flagler.unc.edu/wp-content/uploads/nmc-images/2019/10/singapore_skyline-width2000height772.jpg\")`,\n    backgroundSize: 'cover',\n    backgroundPosition: 'center',\n    backgroundRepeat: 'no-repeat',\n    padding: '50px 0 30px 0',\n    position: 'relative'\n  };\n  const titleStyle = {\n    fontSize: '48px',\n    fontWeight: 'normal',\n    color: COLORS.WHITE,\n    textAlign: 'center',\n    margin: 0,\n    fontFamily: 'Georgia, serif'\n  };\n  const cardStyle = {\n    backgroundColor: COLORS.WHITE,\n    borderRadius: '8px',\n    padding: '40px',\n    boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)',\n    maxWidth: '900px',\n    margin: '40px auto'\n  };\n  const formTitleStyle = {\n    fontSize: '36px',\n    fontWeight: 'normal',\n    color: COLORS.BROWN_TAN,\n    marginBottom: '30px',\n    fontFamily: 'Georgia, serif'\n  };\n  const labelStyle = {\n    display: 'block',\n    marginBottom: '8px',\n    fontSize: '16px',\n    fontWeight: '600',\n    color: COLORS.TEXT_PRIMARY\n  };\n  const textareaStyle = {\n    width: '100%',\n    padding: '15px',\n    borderRadius: '4px',\n    border: `1px solid ${COLORS.TAN_BASE}`,\n    fontSize: '16px',\n    fontFamily: 'Georgia, serif',\n    minHeight: '120px',\n    resize: 'vertical',\n    marginBottom: '20px'\n  };\n  const inputStyle = {\n    width: '100%',\n    padding: '10px',\n    borderRadius: '4px',\n    border: `1px solid ${COLORS.TAN_BASE}`,\n    fontSize: '16px',\n    fontFamily: 'Georgia, serif',\n    marginBottom: '10px'\n  };\n  const smallInputStyle = {\n    ...inputStyle,\n    width: '150px'\n  };\n  const assignToContainerStyle = {\n    border: `2px solid ${COLORS.TAN_BASE}`,\n    borderRadius: '8px',\n    padding: '20px',\n    marginBottom: '20px',\n    backgroundColor: '#fafafa'\n  };\n  const tagStyle = {\n    display: 'inline-flex',\n    alignItems: 'center',\n    backgroundColor: '#e0e0e0',\n    padding: '6px 12px',\n    borderRadius: '20px',\n    margin: '4px',\n    fontSize: '14px'\n  };\n  const tagRemoveStyle = {\n    marginLeft: '8px',\n    cursor: 'pointer',\n    fontWeight: 'bold',\n    color: COLORS.TEXT_SECONDARY\n  };\n  const dropdownStyle = {\n    position: 'relative',\n    width: '100%'\n  };\n  const dropdownMenuStyle = {\n    position: 'absolute',\n    top: '100%',\n    left: 0,\n    right: 0,\n    backgroundColor: COLORS.WHITE,\n    border: `1px solid ${COLORS.TAN_BASE}`,\n    borderRadius: '4px',\n    maxHeight: '200px',\n    overflowY: 'auto',\n    zIndex: 1000,\n    boxShadow: '0 4px 6px rgba(0,0,0,0.1)'\n  };\n  const dropdownItemStyle = {\n    padding: '10px 15px',\n    cursor: 'pointer',\n    borderBottom: `1px solid ${COLORS.TAN_BASE}`\n  };\n  const dropdownItemHoverStyle = {\n    ...dropdownItemStyle,\n    backgroundColor: '#f0f0f0'\n  };\n  const dateTimeRowStyle = {\n    display: 'flex',\n    gap: '15px',\n    alignItems: 'flex-end',\n    marginBottom: '15px'\n  };\n  const dateTimeGroupStyle = {\n    flex: 1\n  };\n  const clearLinkStyle = {\n    color: COLORS.NAVY_BASE,\n    cursor: 'pointer',\n    fontSize: '14px',\n    textDecoration: 'underline',\n    marginLeft: '10px'\n  };\n  const assignToButtonStyle = {\n    backgroundColor: COLORS.BROWN_TAN,\n    color: COLORS.WHITE,\n    padding: '15px 30px',\n    borderRadius: '8px',\n    fontSize: '18px',\n    fontWeight: '600',\n    border: 'none',\n    cursor: 'pointer',\n    fontFamily: 'Georgia, serif',\n    width: '100%',\n    marginTop: '20px',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    gap: '10px'\n  };\n  const footerButtonStyle = {\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginTop: '40px',\n    paddingTop: '20px',\n    borderTop: `1px solid ${COLORS.TAN_BASE}`\n  };\n  const returnLinkStyle = {\n    color: COLORS.NAVY_BASE,\n    textDecoration: 'none',\n    fontSize: '16px',\n    display: 'flex',\n    alignItems: 'center',\n    gap: '8px',\n    cursor: 'pointer'\n  };\n  const actionButtonsStyle = {\n    display: 'flex',\n    gap: '15px'\n  };\n  const cancelButtonStyle = {\n    backgroundColor: COLORS.BROWN_TAN,\n    color: COLORS.WHITE,\n    padding: '12px 24px',\n    borderRadius: '4px',\n    fontSize: '16px',\n    fontWeight: '600',\n    border: 'none',\n    cursor: 'pointer',\n    fontFamily: 'Georgia, serif'\n  };\n  const saveButtonStyle = {\n    ...cancelButtonStyle,\n    backgroundColor: COLORS.TAN_SELECTED\n  };\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: containerStyle,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: cardStyle,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            textAlign: 'center',\n            padding: '40px'\n          },\n          children: \"Loading...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 696,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 695,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 694,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: containerStyle,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: headerBannerStyle,\n      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n        style: titleStyle,\n        children: (course === null || course === void 0 ? void 0 : course.course_name) || 'Project Management'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 708,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 707,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: cardStyle,\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        style: formTitleStyle,\n        children: \"Assign Evaluations\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 712,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          backgroundColor: '#fee',\n          color: COLORS.ERROR_RED,\n          padding: '15px',\n          borderRadius: '8px',\n          marginBottom: '20px'\n        },\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 715,\n        columnNumber: 11\n      }, this), success && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          backgroundColor: '#efe',\n          color: COLORS.SUCCESS_GREEN,\n          padding: '15px',\n          borderRadius: '8px',\n          marginBottom: '20px'\n        },\n        children: success\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 721,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          style: labelStyle,\n          children: \"Description\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 728,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          value: description,\n          onChange: e => setDescription(e.target.value),\n          placeholder: \"Add Description Here\",\n          style: textareaStyle\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 729,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 727,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          style: labelStyle,\n          children: \"Points\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 739,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          value: points,\n          onChange: e => setPoints(e.target.value),\n          style: smallInputStyle,\n          min: \"0\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 740,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 738,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: assignToContainerStyle,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          style: labelStyle,\n          children: \"Assign To\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 751,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: '10px',\n            minHeight: '40px'\n          },\n          children: [assignToType === 'everyone' && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: tagStyle,\n            children: [\"Everyone\", /*#__PURE__*/_jsxDEV(\"span\", {\n              style: tagRemoveStyle,\n              onClick: handleEveryoneToggle,\n              children: \"\\xD7\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 758,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 756,\n            columnNumber: 15\n          }, this), selectedGroups.map(group => /*#__PURE__*/_jsxDEV(\"div\", {\n            style: tagStyle,\n            children: [group.group_name, /*#__PURE__*/_jsxDEV(\"span\", {\n              style: tagRemoveStyle,\n              onClick: () => removeGroup(group.groupid),\n              children: \"\\xD7\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 764,\n              columnNumber: 17\n            }, this)]\n          }, group.groupid, true, {\n            fileName: _jsxFileName,\n            lineNumber: 762,\n            columnNumber: 15\n          }, this)), selectedStudents.map(student => /*#__PURE__*/_jsxDEV(\"div\", {\n            style: tagStyle,\n            children: [student.studentname, /*#__PURE__*/_jsxDEV(\"span\", {\n              style: tagRemoveStyle,\n              onClick: () => removeStudent(student.studentid),\n              children: \"\\xD7\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 770,\n              columnNumber: 17\n            }, this)]\n          }, student.studentid, true, {\n            fileName: _jsxFileName,\n            lineNumber: 768,\n            columnNumber: 15\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 754,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: dropdownStyle,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              gap: '10px',\n              marginBottom: '10px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: () => {\n                setAssignToType('everyone');\n                setSelectedGroups([]);\n                setSelectedStudents([]);\n              },\n              style: {\n                padding: '8px 16px',\n                borderRadius: '4px',\n                border: `1px solid ${COLORS.TAN_BASE}`,\n                backgroundColor: assignToType === 'everyone' ? COLORS.TAN_BASE : COLORS.WHITE,\n                cursor: 'pointer',\n                fontFamily: 'Georgia, serif'\n              },\n              children: \"Everyone\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 778,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: () => {\n                setAssignToType('groups');\n                if (assignToType === 'everyone') {\n                  setSelectedGroups([]);\n                }\n              },\n              style: {\n                padding: '8px 16px',\n                borderRadius: '4px',\n                border: `1px solid ${COLORS.TAN_BASE}`,\n                backgroundColor: assignToType === 'groups' ? COLORS.TAN_BASE : COLORS.WHITE,\n                cursor: 'pointer',\n                fontFamily: 'Georgia, serif'\n              },\n              children: \"Groups\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 796,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 777,\n            columnNumber: 13\n          }, this), assignToType === 'groups' && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: searchQuery,\n              onChange: e => {\n                setSearchQuery(e.target.value);\n                setShowGroupDropdown(true);\n              },\n              onFocus: () => setShowGroupDropdown(true),\n              placeholder: \"Start Typing To Search\",\n              style: inputStyle\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 819,\n              columnNumber: 17\n            }, this), showGroupDropdown && filteredGroups.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: dropdownMenuStyle,\n              children: filteredGroups.map(group => /*#__PURE__*/_jsxDEV(\"div\", {\n                style: selectedGroups.find(g => g.groupid === group.groupid) ? dropdownItemHoverStyle : dropdownItemStyle,\n                onClick: () => handleGroupToggle(group),\n                children: group.group_name\n              }, group.groupid, false, {\n                fileName: _jsxFileName,\n                lineNumber: 833,\n                columnNumber: 23\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 831,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 776,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 750,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: assignToContainerStyle,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: dateTimeRowStyle,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: dateTimeGroupStyle,\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: labelStyle,\n              children: \"Due Date\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 853,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"date\",\n              value: dueDate,\n              onChange: e => setDueDate(e.target.value),\n              style: inputStyle\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 854,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 852,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: dateTimeGroupStyle,\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: labelStyle,\n              children: \"Time\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 862,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                alignItems: 'center'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"time\",\n                value: dueTime,\n                onChange: e => setDueTime(e.target.value),\n                style: inputStyle\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 864,\n                columnNumber: 17\n              }, this), dueTime && /*#__PURE__*/_jsxDEV(\"span\", {\n                style: clearLinkStyle,\n                onClick: () => setDueTime(''),\n                children: \"Clear\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 871,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 863,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 861,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 851,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: dateTimeRowStyle,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: dateTimeGroupStyle,\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: labelStyle,\n              children: \"Available From\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 882,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"date\",\n              value: availableFromDate,\n              onChange: e => setAvailableFromDate(e.target.value),\n              style: inputStyle\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 883,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 881,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: dateTimeGroupStyle,\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: labelStyle,\n              children: \"Time\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 891,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                alignItems: 'center'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"time\",\n                value: availableFromTime,\n                onChange: e => setAvailableFromTime(e.target.value),\n                style: inputStyle\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 893,\n                columnNumber: 17\n              }, this), availableFromTime && /*#__PURE__*/_jsxDEV(\"span\", {\n                style: clearLinkStyle,\n                onClick: () => setAvailableFromTime(''),\n                children: \"Clear\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 900,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 892,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 890,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 880,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: dateTimeRowStyle,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: dateTimeGroupStyle,\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: labelStyle,\n              children: \"Until\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 911,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"date\",\n              value: untilDate,\n              onChange: e => setUntilDate(e.target.value),\n              style: inputStyle\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 912,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 910,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: dateTimeGroupStyle,\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: labelStyle,\n              children: \"Time\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 920,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                alignItems: 'center'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"time\",\n                value: untilTime,\n                onChange: e => setUntilTime(e.target.value),\n                style: inputStyle\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 922,\n                columnNumber: 17\n              }, this), untilTime && /*#__PURE__*/_jsxDEV(\"span\", {\n                style: clearLinkStyle,\n                onClick: () => setUntilTime(''),\n                children: \"Clear\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 929,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 921,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 919,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 909,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 849,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: handleAddToPending,\n        style: assignToButtonStyle,\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"+\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 944,\n          columnNumber: 11\n        }, this), \" Assign To\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 939,\n        columnNumber: 9\n      }, this), pendingAssignments.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: '30px',\n          padding: '20px',\n          backgroundColor: '#f8f9fa',\n          borderRadius: '8px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            marginBottom: '15px',\n            fontSize: '20px'\n          },\n          children: [\"Pending Assignments (\", pendingAssignments.length, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 950,\n          columnNumber: 13\n        }, this), pendingAssignments.map((assignment, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            padding: '15px',\n            marginBottom: '10px',\n            backgroundColor: COLORS.WHITE,\n            borderRadius: '4px',\n            border: `1px solid ${COLORS.TAN_BASE}`,\n            display: 'flex',\n            justifyContent: 'space-between',\n            alignItems: 'center'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontWeight: '600'\n              },\n              children: assignment.groupName\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 963,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: '14px',\n                color: COLORS.TEXT_SECONDARY\n              },\n              children: [assignment.evaluatorType === 'everyone' ? 'Everyone' : assignment.evaluatorIds ? `${assignment.evaluatorIds.length} students` : 'All students', assignment.dueDate && ` â€¢ Due: ${formatDateTime(assignment.dueDate.split('T')[0], assignment.dueDate.split('T')[1] || '')}`]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 964,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 962,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => removePendingAssignment(index),\n            style: {\n              backgroundColor: COLORS.ERROR_RED,\n              color: COLORS.WHITE,\n              border: 'none',\n              borderRadius: '4px',\n              padding: '6px 12px',\n              cursor: 'pointer'\n            },\n            children: \"Remove\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 969,\n            columnNumber: 17\n          }, this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 952,\n          columnNumber: 15\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 949,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: footerButtonStyle,\n        children: [/*#__PURE__*/_jsxDEV(\"a\", {\n          onClick: () => navigate(`/course-roster/${courseId}`),\n          style: returnLinkStyle,\n          children: \"\\u2190 Return\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 989,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: actionButtonsStyle,\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: () => {\n              setPendingAssignments([]);\n              setDescription('');\n              setPoints('25');\n              setAssignToType('groups');\n              setSelectedGroups([]);\n              setSelectedStudents([]);\n              setDueDate('');\n              setDueTime('');\n              setAvailableFromDate('');\n              setAvailableFromTime('');\n              setUntilDate('');\n              setUntilTime('');\n            },\n            style: cancelButtonStyle,\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 996,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: handleSaveAndAssign,\n            disabled: isSubmitting || pendingAssignments.length === 0,\n            style: {\n              ...saveButtonStyle,\n              opacity: isSubmitting || pendingAssignments.length === 0 ? 0.6 : 1,\n              cursor: isSubmitting || pendingAssignments.length === 0 ? 'not-allowed' : 'pointer'\n            },\n            children: isSubmitting ? 'Saving...' : 'Save and Assign'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1016,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 995,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 988,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 711,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 705,\n    columnNumber: 5\n  }, this);\n}\n_s(EvaluationAssignment, \"bSzVi5gCD/3yW9K/ZkmlU9tTJks=\", false, function () {\n  return [useParams, useNavigate, useAuth];\n});\n_c = EvaluationAssignment;\nvar _c;\n$RefreshReg$(_c, \"EvaluationAssignment\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useParams","useNavigate","useAuth","API_URL","jsxDEV","_jsxDEV","Fragment","_Fragment","COLORS","TAN_BACKGROUND","WHITE","NAVY_BUTTON","PLACEHOLDER_TEXT","TEXT_PRIMARY","TEXT_SECONDARY","ERROR_RED","SUCCESS_GREEN","BODY_BACKGROUND","HEADER_TEXT","HEADER_BAR_BG","TAN_BASE","TAN_SELECTED","NAVY_BASE","NAVY_SELECTED","BROWN_TAN","EvaluationAssignment","_s","courseId","navigate","user","course","setCourse","groups","setGroups","students","setStudents","assignments","setAssignments","description","setDescription","points","setPoints","assignToType","setAssignToType","selectedGroups","setSelectedGroups","selectedStudents","setSelectedStudents","dueDate","setDueDate","dueTime","setDueTime","availableFromDate","setAvailableFromDate","availableFromTime","setAvailableFromTime","untilDate","setUntilDate","untilTime","setUntilTime","searchQuery","setSearchQuery","showGroupDropdown","setShowGroupDropdown","showStudentDropdown","setShowStudentDropdown","pendingAssignments","setPendingAssignments","isLoading","setIsLoading","isSubmitting","setIsSubmitting","error","setError","success","setSuccess","fetchCourseInfo","response","fetch","data","json","ok","err","console","fetchGroups","fetchStudents","roster","fetchAssignments","loadData","Promise","all","handleEveryoneToggle","handleGroupToggle","group","prev","isSelected","find","g","groupid","newGroups","filter","log","group_name","map","handleStudentToggle","student","s","studentid","removeGroup","groupId","removeStudent","studentId","filteredGroups","toLowerCase","includes","filteredStudents","studentname","handleAddToPending","length","newAssignments","groupName","evaluatorType","parseInt","availableFrom","until","evaluatorIds","selectedStudentsCount","allStudentsCount","handleSaveAndAssign","totalCreated","errors","assignment","evaluatorStudentIds","studentsCount","push","dueDateTime","dateStr","split","date","Date","isNaN","getTime","toISOString","Error","availableFromISO","warn","untilISO","requestBody","assignmentName","method","headers","body","JSON","stringify","contentType","get","text","substring","status","_data$assignments","message","join","handleDeleteAssignment","assignmentId","window","confirm","removePendingAssignment","index","_","i","formatDateTime","dateString","timeString","toLocaleDateString","year","month","day","hour","minute","e","formatDate","getStatusColor","formatTimeForInput","getLocalDateTime","getFullYear","String","getMonth","padStart","getDate","containerStyle","fontFamily","backgroundColor","minHeight","headerBannerStyle","backgroundImage","backgroundSize","backgroundPosition","backgroundRepeat","padding","position","titleStyle","fontSize","fontWeight","color","textAlign","margin","cardStyle","borderRadius","boxShadow","maxWidth","formTitleStyle","marginBottom","labelStyle","display","textareaStyle","width","border","resize","inputStyle","smallInputStyle","assignToContainerStyle","tagStyle","alignItems","tagRemoveStyle","marginLeft","cursor","dropdownStyle","dropdownMenuStyle","top","left","right","maxHeight","overflowY","zIndex","dropdownItemStyle","borderBottom","dropdownItemHoverStyle","dateTimeRowStyle","gap","dateTimeGroupStyle","flex","clearLinkStyle","textDecoration","assignToButtonStyle","marginTop","justifyContent","footerButtonStyle","paddingTop","borderTop","returnLinkStyle","actionButtonsStyle","cancelButtonStyle","saveButtonStyle","style","children","fileName","_jsxFileName","lineNumber","columnNumber","course_name","value","onChange","target","placeholder","type","min","onClick","onFocus","disabled","opacity","_c","$RefreshReg$"],"sources":["/Users/ryandanziger/Desktop/smu-web-application/peer-eval-system/frontend-clean/src/components/EvaluationAssignment.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport API_URL from '../config';\n\nconst COLORS = {\n  TAN_BACKGROUND: 'rgba(138,112,76,0.9)',\n  WHITE: 'white',\n  NAVY_BUTTON: '#141b4d',\n  PLACEHOLDER_TEXT: '#8a704c',\n  TEXT_PRIMARY: '#2d3748',\n  TEXT_SECONDARY: '#5C7094',\n  ERROR_RED: '#C97C7C',\n  SUCCESS_GREEN: '#4CAF50',\n  BODY_BACKGROUND: 'white',\n  HEADER_TEXT: '#2d3748',\n  HEADER_BAR_BG: '#e8e8e8',\n  TAN_BASE: '#C4B5A0',\n  TAN_SELECTED: '#8B7355',\n  NAVY_BASE: '#5C7094',\n  NAVY_SELECTED: '#4A5568',\n  BROWN_TAN: '#8a704c',\n};\n\nexport default function EvaluationAssignment() {\n  const { courseId } = useParams();\n  const navigate = useNavigate();\n  const { user } = useAuth();\n  const [course, setCourse] = useState(null);\n  const [groups, setGroups] = useState([]);\n  const [students, setStudents] = useState([]);\n  const [assignments, setAssignments] = useState([]);\n  \n  // Form state matching Figma design\n  const [description, setDescription] = useState('');\n  const [points, setPoints] = useState('25');\n  const [assignToType, setAssignToType] = useState('groups'); // 'everyone' or 'groups'\n  const [selectedGroups, setSelectedGroups] = useState([]);\n  const [selectedStudents, setSelectedStudents] = useState([]);\n  const [dueDate, setDueDate] = useState('');\n  const [dueTime, setDueTime] = useState('');\n  const [availableFromDate, setAvailableFromDate] = useState('');\n  const [availableFromTime, setAvailableFromTime] = useState('');\n  const [untilDate, setUntilDate] = useState('');\n  const [untilTime, setUntilTime] = useState('');\n  const [searchQuery, setSearchQuery] = useState('');\n  const [showGroupDropdown, setShowGroupDropdown] = useState(false);\n  const [showStudentDropdown, setShowStudentDropdown] = useState(false);\n  const [pendingAssignments, setPendingAssignments] = useState([]);\n  \n  const [isLoading, setIsLoading] = useState(true);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n\n  const fetchCourseInfo = useCallback(async () => {\n    try {\n      const response = await fetch(`${API_URL}/api/courses/${courseId}`);\n      const data = await response.json();\n      if (response.ok) {\n        setCourse(data.course);\n      }\n    } catch (err) {\n      console.error('Error fetching course:', err);\n    }\n  }, [courseId]);\n\n  const fetchGroups = useCallback(async () => {\n    try {\n      const response = await fetch(`${API_URL}/api/courses/${courseId}/groups`);\n      const data = await response.json();\n      if (response.ok) {\n        setGroups(data.groups || []);\n      }\n    } catch (err) {\n      console.error('Error fetching groups:', err);\n    }\n  }, [courseId]);\n\n  const fetchStudents = useCallback(async () => {\n    try {\n      const response = await fetch(`${API_URL}/api/courses/${courseId}/roster`);\n      const data = await response.json();\n      if (response.ok) {\n        setStudents(data.roster || []);\n      }\n    } catch (err) {\n      console.error('Error fetching students:', err);\n    }\n  }, [courseId]);\n\n  const fetchAssignments = useCallback(async () => {\n    try {\n      const response = await fetch(`${API_URL}/api/courses/${courseId}/evaluation-assignments`);\n      const data = await response.json();\n      if (response.ok) {\n        setAssignments(data.assignments || []);\n      }\n    } catch (err) {\n      console.error('Error fetching assignments:', err);\n    }\n  }, [courseId]);\n\n  useEffect(() => {\n    const loadData = async () => {\n      setIsLoading(true);\n      await Promise.all([\n        fetchCourseInfo(),\n        fetchGroups(),\n        fetchStudents(),\n        fetchAssignments()\n      ]);\n      setIsLoading(false);\n    };\n    loadData();\n  }, [courseId, fetchCourseInfo, fetchGroups, fetchStudents, fetchAssignments]);\n\n  // Handle \"Everyone\" selection\n  const handleEveryoneToggle = () => {\n    if (assignToType === 'everyone') {\n      setAssignToType('groups');\n      setSelectedGroups([]);\n    } else {\n      setAssignToType('everyone');\n      setSelectedGroups([]);\n      setSelectedStudents([]);\n    }\n  };\n\n  // Handle group selection\n  const handleGroupToggle = (group) => {\n    setSelectedGroups(prev => {\n      const isSelected = prev.find(g => g.groupid === group.groupid);\n      const newGroups = isSelected \n        ? prev.filter(g => g.groupid !== group.groupid)\n        : [...prev, group];\n      console.log('Group toggled:', group.group_name, 'Selected groups:', newGroups.map(g => g.group_name));\n      return newGroups;\n    });\n    setShowGroupDropdown(false);\n  };\n\n  // Handle student selection\n  const handleStudentToggle = (student) => {\n    if (selectedStudents.find(s => s.studentid === student.studentid)) {\n      setSelectedStudents(prev => prev.filter(s => s.studentid !== student.studentid));\n    } else {\n      setSelectedStudents(prev => [...prev, student]);\n    }\n    setShowStudentDropdown(false);\n  };\n\n  // Remove selected group\n  const removeGroup = (groupId) => {\n    setSelectedGroups(prev => prev.filter(g => g.groupid !== groupId));\n  };\n\n  // Remove selected student\n  const removeStudent = (studentId) => {\n    setSelectedStudents(prev => prev.filter(s => s.studentid !== studentId));\n  };\n\n  // Filter groups/students based on search\n  const filteredGroups = groups.filter(g => \n    g.group_name.toLowerCase().includes(searchQuery.toLowerCase())\n  );\n  const filteredStudents = students.filter(s => \n    s.studentname.toLowerCase().includes(searchQuery.toLowerCase())\n  );\n\n  // Handle \"Assign To\" button - adds to pending assignments\n  const handleAddToPending = () => {\n    if (!dueDate) {\n      setError('Please select a due date');\n      return;\n    }\n\n    console.log('Add to pending - assignToType:', assignToType, 'selectedGroups:', selectedGroups.length);\n\n    if (assignToType === 'everyone') {\n      // Add assignment for all students in all groups\n      if (groups.length === 0) {\n        setError('No groups available. Please create groups first.');\n        return;\n      }\n      const newAssignments = groups.map(group => ({\n        groupId: group.groupid,\n        groupName: group.group_name,\n        evaluatorType: 'everyone',\n        description,\n        points: parseInt(points) || 0,\n        dueDate: dueDate ? `${dueDate}T${dueTime || '23:59'}` : null,\n        availableFrom: availableFromDate ? `${availableFromDate}T${availableFromTime || '00:00'}` : null,\n        until: untilDate ? `${untilDate}T${untilTime || '23:59'}` : null,\n      }));\n      setPendingAssignments(prev => [...prev, ...newAssignments]);\n      setSuccess(`Added ${newAssignments.length} assignment(s) for all students`);\n    } else if (selectedGroups.length > 0) {\n      // Add assignments for selected groups\n      // If no students selected, use all students in the course\n      const evaluatorIds = selectedStudents.length > 0 \n        ? selectedStudents.map(s => s.studentid)\n        : null; // null means use all students\n      \n      console.log('Creating assignments for groups:', {\n        selectedGroups: selectedGroups.map(g => g.group_name),\n        evaluatorIds,\n        selectedStudentsCount: selectedStudents.length,\n        allStudentsCount: students.length\n      });\n      \n      const newAssignments = selectedGroups.map(group => ({\n        groupId: group.groupid,\n        groupName: group.group_name,\n        evaluatorType: 'group',\n        evaluatorIds: evaluatorIds,\n        description,\n        points: parseInt(points) || 0,\n        dueDate: dueDate ? `${dueDate}T${dueTime || '23:59'}` : null,\n        availableFrom: availableFromDate ? `${availableFromDate}T${availableFromTime || '00:00'}` : null,\n        until: untilDate ? `${untilDate}T${untilTime || '23:59'}` : null,\n      }));\n      setPendingAssignments(prev => [...prev, ...newAssignments]);\n      setSuccess(`Added ${newAssignments.length} assignment(s)`);\n    } else {\n      setError('Please select at least one group or choose \"Everyone\"');\n      return;\n    }\n\n    // Clear form\n    setDescription('');\n    setPoints('25');\n    setAssignToType('groups');\n    setSelectedGroups([]);\n    setSelectedStudents([]);\n    setDueDate('');\n    setDueTime('');\n    setAvailableFromDate('');\n    setAvailableFromTime('');\n    setUntilDate('');\n    setUntilTime('');\n    setSearchQuery('');\n    setSuccess('Assignment added to pending list');\n  };\n\n  // Handle final \"Save and Assign\" - creates all pending assignments\n  const handleSaveAndAssign = async () => {\n    if (pendingAssignments.length === 0) {\n      setError('No assignments to save. Please add assignments first.');\n      return;\n    }\n\n    setIsSubmitting(true);\n    setError('');\n    setSuccess('');\n\n    try {\n      let totalCreated = 0;\n      const errors = [];\n\n      for (const assignment of pendingAssignments) {\n        try {\n          let evaluatorStudentIds = [];\n          \n          if (assignment.evaluatorType === 'everyone') {\n            // All students in the course evaluate this group\n            evaluatorStudentIds = students.map(s => s.studentid);\n          } else {\n            // Use selected students, or all students if none selected\n            evaluatorStudentIds = assignment.evaluatorIds || students.map(s => s.studentid);\n            console.log(`Assignment for ${assignment.groupName}:`, {\n              evaluatorIds: assignment.evaluatorIds,\n              evaluatorStudentIds,\n              studentsCount: students.length\n            });\n          }\n\n          if (!evaluatorStudentIds || evaluatorStudentIds.length === 0) {\n            errors.push(`No evaluators for ${assignment.groupName}`);\n            continue;\n          }\n\n          // Combine date and time for due date\n          let dueDateTime = null;\n          if (assignment.dueDate) {\n            try {\n              const dateStr = assignment.dueDate.includes('T') \n                ? assignment.dueDate \n                : `${assignment.dueDate}T${assignment.dueDate.split('T')[1] || '23:59'}`;\n              const date = new Date(dateStr);\n              if (!isNaN(date.getTime())) {\n                dueDateTime = date.toISOString();\n              } else {\n                throw new Error(`Invalid due date: ${assignment.dueDate}`);\n              }\n            } catch (err) {\n              errors.push(`${assignment.groupName}: Invalid due date format`);\n              continue;\n            }\n          } else {\n            errors.push(`${assignment.groupName}: Due date is required`);\n            continue;\n          }\n\n          // Format availableFrom and until dates\n          let availableFromISO = null;\n          if (assignment.availableFrom) {\n            try {\n              const dateStr = assignment.availableFrom.includes('T') \n                ? assignment.availableFrom \n                : `${assignment.availableFrom}T${assignment.availableFrom.split('T')[1] || '00:00'}`;\n              const date = new Date(dateStr);\n              if (!isNaN(date.getTime())) {\n                availableFromISO = date.toISOString();\n              }\n            } catch (err) {\n              console.warn(`Invalid availableFrom date for ${assignment.groupName}:`, err);\n            }\n          }\n\n          let untilISO = null;\n          if (assignment.until) {\n            try {\n              const dateStr = assignment.until.includes('T') \n                ? assignment.until \n                : `${assignment.until}T${assignment.until.split('T')[1] || '23:59'}`;\n              const date = new Date(dateStr);\n              if (!isNaN(date.getTime())) {\n                untilISO = date.toISOString();\n              }\n            } catch (err) {\n              console.warn(`Invalid until date for ${assignment.groupName}:`, err);\n            }\n          }\n\n          const requestBody = {\n            courseId: parseInt(courseId),\n            groupId: assignment.groupId,\n            evaluatorStudentIds: evaluatorStudentIds,\n            dueDate: dueDateTime,\n            assignmentName: assignment.description || `Peer Evaluation - ${assignment.groupName}`,\n            points: assignment.points || 0,\n            availableFrom: availableFromISO,\n            until: untilISO,\n          };\n\n          console.log(`Creating assignment for ${assignment.groupName}:`, requestBody);\n\n          const response = await fetch(`${API_URL}/api/evaluation-assignments`, {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json',\n            },\n            body: JSON.stringify(requestBody),\n          });\n\n          // Check if response is JSON\n          const contentType = response.headers.get('content-type');\n          let data;\n          \n          if (contentType && contentType.includes('application/json')) {\n            data = await response.json();\n          } else {\n            // Server returned HTML (likely an error page)\n            const text = await response.text();\n            console.error(`Non-JSON response for ${assignment.groupName}:`, text.substring(0, 200));\n            errors.push(`${assignment.groupName}: Server error (${response.status}). Check backend logs.`);\n            continue;\n          }\n          \n          if (response.ok) {\n            totalCreated += data.assignments?.length || 0;\n          } else {\n            errors.push(`${assignment.groupName}: ${data.message || 'Failed'}`);\n          }\n        } catch (err) {\n          console.error(`Error creating assignment for ${assignment.groupName}:`, err);\n          errors.push(`${assignment.groupName}: ${err.message}`);\n        }\n      }\n\n      if (totalCreated > 0) {\n        setSuccess(`Successfully created ${totalCreated} evaluation assignment(s)`);\n        setPendingAssignments([]);\n        fetchAssignments();\n      } else {\n        setError(`Failed to create assignments: ${errors.join('; ')}`);\n      }\n    } catch (err) {\n      console.error('Error saving assignments:', err);\n      setError('Failed to save assignments. Please try again.');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const handleDeleteAssignment = async (assignmentId) => {\n    if (!window.confirm('Are you sure you want to delete this assignment?')) {\n      return;\n    }\n    \n    try {\n      const response = await fetch(`${API_URL}/api/evaluation-assignments/${assignmentId}`, {\n        method: 'DELETE',\n      });\n      \n      if (response.ok) {\n        setSuccess('Assignment deleted successfully');\n        fetchAssignments();\n      } else {\n        const data = await response.json();\n        setError(data.message || 'Failed to delete assignment');\n      }\n    } catch (err) {\n      console.error('Error deleting assignment:', err);\n      setError('Failed to delete assignment. Please try again.');\n    }\n  };\n\n  const removePendingAssignment = (index) => {\n    setPendingAssignments(prev => prev.filter((_, i) => i !== index));\n  };\n\n  const formatDateTime = (dateString, timeString) => {\n    if (!dateString) return '';\n    try {\n      const date = new Date(`${dateString}T${timeString || '00:00'}`);\n      if (isNaN(date.getTime())) {\n        return dateString; // Return original if invalid\n      }\n      return date.toLocaleDateString('en-US', { \n        year: 'numeric', \n        month: 'short', \n        day: 'numeric',\n        hour: '2-digit',\n        minute: '2-digit'\n      });\n    } catch (e) {\n      return dateString;\n    }\n  };\n\n  const formatDate = (dateString) => {\n    if (!dateString) return 'N/A';\n    const date = new Date(dateString);\n    return date.toLocaleDateString('en-US', { \n      year: 'numeric', \n      month: 'short', \n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  const getStatusColor = (status) => {\n    switch (status) {\n      case 'completed':\n        return COLORS.SUCCESS_GREEN;\n      case 'overdue':\n        return COLORS.ERROR_RED;\n      default:\n        return COLORS.TEXT_SECONDARY;\n    }\n  };\n\n  // Helper to format time for input (HH:MM)\n  const formatTimeForInput = (timeString) => {\n    if (!timeString) return '';\n    // Convert \"23:59 PM\" format to \"23:59\" if needed\n    return timeString;\n  };\n\n  // Helper to get current date/time in local format for inputs\n  const getLocalDateTime = (dateString) => {\n    if (!dateString) return '';\n    const date = new Date(dateString);\n    const year = date.getFullYear();\n    const month = String(date.getMonth() + 1).padStart(2, '0');\n    const day = String(date.getDate()).padStart(2, '0');\n    return `${year}-${month}-${day}`;\n  };\n\n  const containerStyle = {\n    fontFamily: 'Georgia, serif',\n    backgroundColor: COLORS.BODY_BACKGROUND,\n    minHeight: '100vh',\n  };\n\n  const headerBannerStyle = {\n    backgroundImage: `linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4)), url(\"https://www.kenan-flagler.unc.edu/wp-content/uploads/nmc-images/2019/10/singapore_skyline-width2000height772.jpg\")`,\n    backgroundSize: 'cover',\n    backgroundPosition: 'center',\n    backgroundRepeat: 'no-repeat',\n    padding: '50px 0 30px 0',\n    position: 'relative',\n  };\n\n  const titleStyle = {\n    fontSize: '48px',\n    fontWeight: 'normal',\n    color: COLORS.WHITE,\n    textAlign: 'center',\n    margin: 0,\n    fontFamily: 'Georgia, serif',\n  };\n\n  const cardStyle = {\n    backgroundColor: COLORS.WHITE,\n    borderRadius: '8px',\n    padding: '40px',\n    boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)',\n    maxWidth: '900px',\n    margin: '40px auto',\n  };\n\n  const formTitleStyle = {\n    fontSize: '36px',\n    fontWeight: 'normal',\n    color: COLORS.BROWN_TAN,\n    marginBottom: '30px',\n    fontFamily: 'Georgia, serif',\n  };\n\n  const labelStyle = {\n    display: 'block',\n    marginBottom: '8px',\n    fontSize: '16px',\n    fontWeight: '600',\n    color: COLORS.TEXT_PRIMARY,\n  };\n\n  const textareaStyle = {\n    width: '100%',\n    padding: '15px',\n    borderRadius: '4px',\n    border: `1px solid ${COLORS.TAN_BASE}`,\n    fontSize: '16px',\n    fontFamily: 'Georgia, serif',\n    minHeight: '120px',\n    resize: 'vertical',\n    marginBottom: '20px',\n  };\n\n  const inputStyle = {\n    width: '100%',\n    padding: '10px',\n    borderRadius: '4px',\n    border: `1px solid ${COLORS.TAN_BASE}`,\n    fontSize: '16px',\n    fontFamily: 'Georgia, serif',\n    marginBottom: '10px',\n  };\n\n  const smallInputStyle = {\n    ...inputStyle,\n    width: '150px',\n  };\n\n  const assignToContainerStyle = {\n    border: `2px solid ${COLORS.TAN_BASE}`,\n    borderRadius: '8px',\n    padding: '20px',\n    marginBottom: '20px',\n    backgroundColor: '#fafafa',\n  };\n\n  const tagStyle = {\n    display: 'inline-flex',\n    alignItems: 'center',\n    backgroundColor: '#e0e0e0',\n    padding: '6px 12px',\n    borderRadius: '20px',\n    margin: '4px',\n    fontSize: '14px',\n  };\n\n  const tagRemoveStyle = {\n    marginLeft: '8px',\n    cursor: 'pointer',\n    fontWeight: 'bold',\n    color: COLORS.TEXT_SECONDARY,\n  };\n\n  const dropdownStyle = {\n    position: 'relative',\n    width: '100%',\n  };\n\n  const dropdownMenuStyle = {\n    position: 'absolute',\n    top: '100%',\n    left: 0,\n    right: 0,\n    backgroundColor: COLORS.WHITE,\n    border: `1px solid ${COLORS.TAN_BASE}`,\n    borderRadius: '4px',\n    maxHeight: '200px',\n    overflowY: 'auto',\n    zIndex: 1000,\n    boxShadow: '0 4px 6px rgba(0,0,0,0.1)',\n  };\n\n  const dropdownItemStyle = {\n    padding: '10px 15px',\n    cursor: 'pointer',\n    borderBottom: `1px solid ${COLORS.TAN_BASE}`,\n  };\n\n  const dropdownItemHoverStyle = {\n    ...dropdownItemStyle,\n    backgroundColor: '#f0f0f0',\n  };\n\n  const dateTimeRowStyle = {\n    display: 'flex',\n    gap: '15px',\n    alignItems: 'flex-end',\n    marginBottom: '15px',\n  };\n\n  const dateTimeGroupStyle = {\n    flex: 1,\n  };\n\n  const clearLinkStyle = {\n    color: COLORS.NAVY_BASE,\n    cursor: 'pointer',\n    fontSize: '14px',\n    textDecoration: 'underline',\n    marginLeft: '10px',\n  };\n\n  const assignToButtonStyle = {\n    backgroundColor: COLORS.BROWN_TAN,\n    color: COLORS.WHITE,\n    padding: '15px 30px',\n    borderRadius: '8px',\n    fontSize: '18px',\n    fontWeight: '600',\n    border: 'none',\n    cursor: 'pointer',\n    fontFamily: 'Georgia, serif',\n    width: '100%',\n    marginTop: '20px',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    gap: '10px',\n  };\n\n  const footerButtonStyle = {\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginTop: '40px',\n    paddingTop: '20px',\n    borderTop: `1px solid ${COLORS.TAN_BASE}`,\n  };\n\n  const returnLinkStyle = {\n    color: COLORS.NAVY_BASE,\n    textDecoration: 'none',\n    fontSize: '16px',\n    display: 'flex',\n    alignItems: 'center',\n    gap: '8px',\n    cursor: 'pointer',\n  };\n\n  const actionButtonsStyle = {\n    display: 'flex',\n    gap: '15px',\n  };\n\n  const cancelButtonStyle = {\n    backgroundColor: COLORS.BROWN_TAN,\n    color: COLORS.WHITE,\n    padding: '12px 24px',\n    borderRadius: '4px',\n    fontSize: '16px',\n    fontWeight: '600',\n    border: 'none',\n    cursor: 'pointer',\n    fontFamily: 'Georgia, serif',\n  };\n\n  const saveButtonStyle = {\n    ...cancelButtonStyle,\n    backgroundColor: COLORS.TAN_SELECTED,\n  };\n\n  if (isLoading) {\n    return (\n      <div style={containerStyle}>\n        <div style={cardStyle}>\n          <div style={{ textAlign: 'center', padding: '40px' }}>\n            Loading...\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div style={containerStyle}>\n      {/* Header Banner */}\n      <div style={headerBannerStyle}>\n        <h1 style={titleStyle}>{course?.course_name || 'Project Management'}</h1>\n      </div>\n\n      <div style={cardStyle}>\n        <h2 style={formTitleStyle}>Assign Evaluations</h2>\n\n        {error && (\n          <div style={{ backgroundColor: '#fee', color: COLORS.ERROR_RED, padding: '15px', borderRadius: '8px', marginBottom: '20px' }}>\n            {error}\n          </div>\n        )}\n\n        {success && (\n          <div style={{ backgroundColor: '#efe', color: COLORS.SUCCESS_GREEN, padding: '15px', borderRadius: '8px', marginBottom: '20px' }}>\n            {success}\n          </div>\n        )}\n\n        {/* Description Field */}\n        <div>\n          <label style={labelStyle}>Description</label>\n          <textarea\n            value={description}\n            onChange={(e) => setDescription(e.target.value)}\n            placeholder=\"Add Description Here\"\n            style={textareaStyle}\n          />\n        </div>\n\n        {/* Points Field */}\n        <div>\n          <label style={labelStyle}>Points</label>\n          <input\n            type=\"number\"\n            value={points}\n            onChange={(e) => setPoints(e.target.value)}\n            style={smallInputStyle}\n            min=\"0\"\n          />\n        </div>\n\n        {/* Assign To Section */}\n        <div style={assignToContainerStyle}>\n          <label style={labelStyle}>Assign To</label>\n          \n          {/* Selected items as tags */}\n          <div style={{ marginBottom: '10px', minHeight: '40px' }}>\n            {assignToType === 'everyone' && (\n              <div style={tagStyle}>\n                Everyone\n                <span style={tagRemoveStyle} onClick={handleEveryoneToggle}>Ã—</span>\n              </div>\n            )}\n            {selectedGroups.map(group => (\n              <div key={group.groupid} style={tagStyle}>\n                {group.group_name}\n                <span style={tagRemoveStyle} onClick={() => removeGroup(group.groupid)}>Ã—</span>\n              </div>\n            ))}\n            {selectedStudents.map(student => (\n              <div key={student.studentid} style={tagStyle}>\n                {student.studentname}\n                <span style={tagRemoveStyle} onClick={() => removeStudent(student.studentid)}>Ã—</span>\n              </div>\n            ))}\n          </div>\n\n          {/* Selection interface */}\n          <div style={dropdownStyle}>\n            <div style={{ display: 'flex', gap: '10px', marginBottom: '10px' }}>\n              <button\n                type=\"button\"\n                onClick={() => {\n                  setAssignToType('everyone');\n                  setSelectedGroups([]);\n                  setSelectedStudents([]);\n                }}\n                style={{\n                  padding: '8px 16px',\n                  borderRadius: '4px',\n                  border: `1px solid ${COLORS.TAN_BASE}`,\n                  backgroundColor: assignToType === 'everyone' ? COLORS.TAN_BASE : COLORS.WHITE,\n                  cursor: 'pointer',\n                  fontFamily: 'Georgia, serif',\n                }}\n              >\n                Everyone\n              </button>\n              <button\n                type=\"button\"\n                onClick={() => {\n                  setAssignToType('groups');\n                  if (assignToType === 'everyone') {\n                    setSelectedGroups([]);\n                  }\n                }}\n                style={{\n                  padding: '8px 16px',\n                  borderRadius: '4px',\n                  border: `1px solid ${COLORS.TAN_BASE}`,\n                  backgroundColor: assignToType === 'groups' ? COLORS.TAN_BASE : COLORS.WHITE,\n                  cursor: 'pointer',\n                  fontFamily: 'Georgia, serif',\n                }}\n              >\n                Groups\n              </button>\n            </div>\n\n            {assignToType === 'groups' && (\n              <>\n                <input\n                  type=\"text\"\n                  value={searchQuery}\n                  onChange={(e) => {\n                    setSearchQuery(e.target.value);\n                    setShowGroupDropdown(true);\n                  }}\n                  onFocus={() => setShowGroupDropdown(true)}\n                  placeholder=\"Start Typing To Search\"\n                  style={inputStyle}\n                />\n                {showGroupDropdown && filteredGroups.length > 0 && (\n                  <div style={dropdownMenuStyle}>\n                    {filteredGroups.map(group => (\n                      <div\n                        key={group.groupid}\n                        style={selectedGroups.find(g => g.groupid === group.groupid) ? dropdownItemHoverStyle : dropdownItemStyle}\n                        onClick={() => handleGroupToggle(group)}\n                      >\n                        {group.group_name}\n                      </div>\n                    ))}\n                  </div>\n                )}\n              </>\n            )}\n          </div>\n        </div>\n\n        {/* Date and Time Fields */}\n        <div style={assignToContainerStyle}>\n          {/* Due Date */}\n          <div style={dateTimeRowStyle}>\n            <div style={dateTimeGroupStyle}>\n              <label style={labelStyle}>Due Date</label>\n              <input\n                type=\"date\"\n                value={dueDate}\n                onChange={(e) => setDueDate(e.target.value)}\n                style={inputStyle}\n              />\n            </div>\n            <div style={dateTimeGroupStyle}>\n              <label style={labelStyle}>Time</label>\n              <div style={{ display: 'flex', alignItems: 'center' }}>\n                <input\n                  type=\"time\"\n                  value={dueTime}\n                  onChange={(e) => setDueTime(e.target.value)}\n                  style={inputStyle}\n                />\n                {dueTime && (\n                  <span style={clearLinkStyle} onClick={() => setDueTime('')}>\n                    Clear\n                  </span>\n                )}\n              </div>\n            </div>\n          </div>\n\n          {/* Available From */}\n          <div style={dateTimeRowStyle}>\n            <div style={dateTimeGroupStyle}>\n              <label style={labelStyle}>Available From</label>\n              <input\n                type=\"date\"\n                value={availableFromDate}\n                onChange={(e) => setAvailableFromDate(e.target.value)}\n                style={inputStyle}\n              />\n            </div>\n            <div style={dateTimeGroupStyle}>\n              <label style={labelStyle}>Time</label>\n              <div style={{ display: 'flex', alignItems: 'center' }}>\n                <input\n                  type=\"time\"\n                  value={availableFromTime}\n                  onChange={(e) => setAvailableFromTime(e.target.value)}\n                  style={inputStyle}\n                />\n                {availableFromTime && (\n                  <span style={clearLinkStyle} onClick={() => setAvailableFromTime('')}>\n                    Clear\n                  </span>\n                )}\n              </div>\n            </div>\n          </div>\n\n          {/* Until */}\n          <div style={dateTimeRowStyle}>\n            <div style={dateTimeGroupStyle}>\n              <label style={labelStyle}>Until</label>\n              <input\n                type=\"date\"\n                value={untilDate}\n                onChange={(e) => setUntilDate(e.target.value)}\n                style={inputStyle}\n              />\n            </div>\n            <div style={dateTimeGroupStyle}>\n              <label style={labelStyle}>Time</label>\n              <div style={{ display: 'flex', alignItems: 'center' }}>\n                <input\n                  type=\"time\"\n                  value={untilTime}\n                  onChange={(e) => setUntilTime(e.target.value)}\n                  style={inputStyle}\n                />\n                {untilTime && (\n                  <span style={clearLinkStyle} onClick={() => setUntilTime('')}>\n                    Clear\n                  </span>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* + Assign To Button */}\n        <button\n          type=\"button\"\n          onClick={handleAddToPending}\n          style={assignToButtonStyle}\n        >\n          <span>+</span> Assign To\n        </button>\n\n        {/* Pending Assignments List */}\n        {pendingAssignments.length > 0 && (\n          <div style={{ marginTop: '30px', padding: '20px', backgroundColor: '#f8f9fa', borderRadius: '8px' }}>\n            <h3 style={{ marginBottom: '15px', fontSize: '20px' }}>Pending Assignments ({pendingAssignments.length})</h3>\n            {pendingAssignments.map((assignment, index) => (\n              <div key={index} style={{ \n                padding: '15px', \n                marginBottom: '10px', \n                backgroundColor: COLORS.WHITE, \n                borderRadius: '4px',\n                border: `1px solid ${COLORS.TAN_BASE}`,\n                display: 'flex',\n                justifyContent: 'space-between',\n                alignItems: 'center'\n              }}>\n                <div>\n                  <div style={{ fontWeight: '600' }}>{assignment.groupName}</div>\n                  <div style={{ fontSize: '14px', color: COLORS.TEXT_SECONDARY }}>\n                    {assignment.evaluatorType === 'everyone' ? 'Everyone' : (assignment.evaluatorIds ? `${assignment.evaluatorIds.length} students` : 'All students')}\n                    {assignment.dueDate && ` â€¢ Due: ${formatDateTime(assignment.dueDate.split('T')[0], assignment.dueDate.split('T')[1] || '')}`}\n                  </div>\n                </div>\n                <button\n                  onClick={() => removePendingAssignment(index)}\n                  style={{\n                    backgroundColor: COLORS.ERROR_RED,\n                    color: COLORS.WHITE,\n                    border: 'none',\n                    borderRadius: '4px',\n                    padding: '6px 12px',\n                    cursor: 'pointer',\n                  }}\n                >\n                  Remove\n                </button>\n              </div>\n            ))}\n          </div>\n        )}\n\n        {/* Footer Buttons */}\n        <div style={footerButtonStyle}>\n          <a\n            onClick={() => navigate(`/course-roster/${courseId}`)}\n            style={returnLinkStyle}\n          >\n            â† Return\n          </a>\n          <div style={actionButtonsStyle}>\n            <button\n              type=\"button\"\n              onClick={() => {\n                setPendingAssignments([]);\n                setDescription('');\n                setPoints('25');\n                setAssignToType('groups');\n                setSelectedGroups([]);\n                setSelectedStudents([]);\n                setDueDate('');\n                setDueTime('');\n                setAvailableFromDate('');\n                setAvailableFromTime('');\n                setUntilDate('');\n                setUntilTime('');\n              }}\n              style={cancelButtonStyle}\n            >\n              Cancel\n            </button>\n            <button\n              type=\"button\"\n              onClick={handleSaveAndAssign}\n              disabled={isSubmitting || pendingAssignments.length === 0}\n              style={{\n                ...saveButtonStyle,\n                opacity: (isSubmitting || pendingAssignments.length === 0) ? 0.6 : 1,\n                cursor: (isSubmitting || pendingAssignments.length === 0) ? 'not-allowed' : 'pointer'\n              }}\n            >\n              {isSubmitting ? 'Saving...' : 'Save and Assign'}\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}